import{a as P}from"./chunk-U4EFFOIM.js";import{a as T}from"./chunk-IWK7SOX5.js";import{a as w}from"./chunk-F4SQSF7Y.js";import{a as E}from"./chunk-EPYS6DY5.js";import"./chunk-X4BA4ZY7.js";import"./chunk-VHIVGA7J.js";import{l as C,m as I,p as y}from"./chunk-JTZO6T7H.js";import{Db as n,Fb as _,La as b,Na as l,Sa as p,Xa as S,ab as g,ca as f,d as B,da as u,hb as s,ob as t,pb as r,qb as c,sb as h,vb as x,wb as m}from"./chunk-NWJZ2U3V.js";var k=B(T());function O(o,d){o&1&&(t(0,"div",16)(1,"p"),n(2,"No proposals found."),r()())}function F(o,d){if(o&1){let e=h();t(0,"li")(1,"a",30),x("click",function(){f(e);let a=m().$implicit,v=m();return u(v.accept(a._id))}),c(2,"i",31),n(3,"Accept Offer "),r()()}}function D(o,d){o&1&&(t(0,"li")(1,"a",32),c(2,"i",31),n(3,"Accepted "),r()())}function A(o,d){if(o&1){let e=h();t(0,"div",17)(1,"div",18)(2,"div",19)(3,"a",20),x("click",function(){let a=f(e).$implicit,v=m();return u(v.delete(a._id))}),c(4,"i",21),r()(),t(5,"div",22),c(6,"img",23),r(),t(7,"div",24)(8,"h4",25)(9,"a",26),n(10),r()(),t(11,"div",27)(12,"ul")(13,"li"),n(14),t(15,"span"),n(16,"Fixed price"),r()(),t(17,"li"),n(18),t(19,"span"),n(20,"Delivery Time"),r()()()(),t(21,"div",28)(22,"ul"),g(23,F,4,0,"li",29)(24,D,4,0,"li",29),r()()()()()}if(o&2){let e=d.$implicit;l(6),s("src","http://127.0.0.1:5000/image/"+e.idUser.image,b),l(4),_(" ",e.idUser.firstname+" "+e.idUser.lastname," "),l(4),_("$ ",e.price," "),l(4),_("",e.days," Days"),l(5),s("ngIf",!e.status),l(),s("ngIf",e.status)}}var L=(()=>{class o{constructor(e,i,a){this._proposal=e,this._act=i,this._user=a,this.id=null,this.proposals=[]}ngOnInit(){this.id=this._act.snapshot.paramMap.get("id"),this.id?this._proposal.getProposalsByServiceId(this.id).subscribe({next:e=>{this.proposals=e,console.log("Proposals:",this.proposals)},error:e=>{console.error("Error loading proposals by service ID",e)}}):console.error("Service ID is null")}delete(e){k.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&this._proposal.deleteProposal(e).subscribe({next:a=>{this.ngOnInit()},error:a=>{console.error("Error deleting proposal",a)}})})}accept(e){this._proposal.acceptProposal(e).subscribe({next:i=>{this.ngOnInit()},error:i=>{console.error("Error accepting proposal",i)}})}trackByProposalId(e,i){return i._id}static{this.\u0275fac=function(i){return new(i||o)(p(P),p(E),p(w))}}static{this.\u0275cmp=S({type:o,selectors:[["app-service-proposals"]],decls:25,vars:3,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"bredcrumb_wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["routerLink","/dashboard"],["aria-current","page",1,"breadcrumb-item","active"],[1,"_dashboard_content"],[1,"_dashboard_content_header"],[1,"_dashboard__header_flex"],[1,"fa","fa-user","mr-1"],[1,"_dashboard_content_body"],["class","col-12",4,"ngIf"],["class","col-xl-4 col-lg-6 col-md-6",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12"],[1,"col-xl-4","col-lg-6","col-md-6"],[1,"_dash_grid_box"],[1,"_dash_remove_wrap"],["data-toggle","tooltip","data-placement","top","title","Remove",1,"_trash_removeal",3,"click"],[1,"fa","fa-trash"],[1,"_dash_grid_box_thumb"],[1,"img-fluid","circle",3,"src"],[1,"_dash_grid_box_caption"],[1,"_elcio_title"],["href","#"],[1,"_dash_usr_bid_rate"],[1,"_dash_usr_actioned"],[4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Accept Offer",1,"_download_cv",3,"click"],[1,"fa","fa-check"],["data-toggle","tooltip","data-placement","top","title","Accept Offer",1,"_download_cv"]],template:function(i,a){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5)(6,"a",6),n(7,"Home"),r()(),t(8,"li",5)(9,"a",7),n(10,"Dashboard"),r()(),t(11,"li",8),n(12,"Manage Bidders"),r()()()()()(),t(13,"div",0)(14,"div",1)(15,"div",9)(16,"div",10)(17,"div",11)(18,"h4"),c(19,"i",12),n(20,"Manage Bidders"),r()()(),t(21,"div",13)(22,"div",0),g(23,O,3,0,"div",14)(24,A,25,6,"div",15),r()()()()()),i&2&&(l(23),s("ngIf",a.proposals.length===0),l(),s("ngForOf",a.proposals)("ngForTrackBy",a.trackByProposalId))},dependencies:[y,C,I],encapsulation:2})}}return o})();export{L as ServiceProposalsComponent};
