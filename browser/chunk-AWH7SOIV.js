import{a as S}from"./chunk-N4E3QWDE.js";import"./chunk-VHIVGA7J.js";import{l as U,p as h}from"./chunk-JTZO6T7H.js";import{Db as r,Eb as p,Gb as x,Na as a,Sa as b,Xa as g,ab as v,ca as m,da as c,hb as _,ob as t,pb as n,sb as f,vb as d,wb as u}from"./chunk-NWJZ2U3V.js";function C(o,E){if(o&1){let e=f();t(0,"tr")(1,"td"),r(2),n(),t(3,"td"),r(4),n(),t(5,"td"),r(6),n(),t(7,"td")(8,"button",11),d("click",function(){let s=m(e).$implicit,l=u();return c(l.banUser(s._id))}),r(9,"Ban"),n(),t(10,"button",12),d("click",function(){let s=m(e).$implicit,l=u();return c(l.removeUser(s._id))}),r(11,"Remove"),n()()()}if(o&2){let e=E.$implicit;a(2),p(e._id),a(2),x("",e.firstname," ",e.lastname,""),a(2),p(e.email)}}var D=(()=>{class o{constructor(e){this.adminService=e,this.users=[]}ngOnInit(){this.loadUsers()}loadUsers(){this.adminService.getAllUsers().subscribe({next:e=>{console.log("Fetched users:",e),this.users=e},error:e=>console.error("Error loading users",e)})}banUser(e){this.adminService.banUser(e).subscribe({next:()=>{console.log("User banned successfully"),this.loadUsers()},error:i=>console.error("Error banning user",i)})}removeUser(e){if(console.log("User ID to remove:",e),!e){console.error("No valid user ID found. Skipping operation.");return}this.adminService.removeUser(e).subscribe({next:()=>{console.log("User removed successfully"),this.loadUsers()},error:i=>console.error("Error removing user",i)})}static{this.\u0275fac=function(i){return new(i||o)(b(S))}}static{this.\u0275cmp=g({type:o,selectors:[["app-user-management"]],decls:27,vars:1,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"bredcrumb_wrap"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"admin-user-management"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(i,s){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"ol",4)(5,"li",5)(6,"a",6),r(7,"Home"),n()(),t(8,"li",5)(9,"a",6),r(10,"Dashboard"),n()(),t(11,"li",7),r(12,"User Management"),n()()()()()(),t(13,"div",8)(14,"table",9)(15,"thead")(16,"tr")(17,"th"),r(18,"ID"),n(),t(19,"th"),r(20,"Name"),n(),t(21,"th"),r(22,"Email"),n(),t(23,"th"),r(24,"Actions"),n()()(),t(25,"tbody"),v(26,C,12,4,"tr",10),n()()()),i&2&&(a(26),_("ngForOf",s.users))},dependencies:[h,U],encapsulation:2})}}return o})();export{D as UserManagementComponent};
