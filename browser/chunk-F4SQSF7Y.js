import{a as l}from"./chunk-VHIVGA7J.js";import{A as o,S as n,X as i,p as s}from"./chunk-NWJZ2U3V.js";var c=(()=>{class e{constructor(r){this.http=r,this.url="http://127.0.0.1:5000/users/"}register(r){return this.http.post(this.url+"register",r)}login(r){return this.http.post(this.url+"login",r).pipe(o(this.handleError))}getUserById(r){return this.http.get(this.url+r).pipe(o(this.handleError))}editUser(r,t){return this.http.put(this.url+r,t).pipe(o(this.handleError))}updateUserRole(r,t){return this.http.put(this.url+"update-role",{userId:r,role:t}).pipe(o(this.handleError))}isLoggedIn(){return!!localStorage.getItem("token")}isAdmin(){let r=localStorage.getItem("user");if(!r)return!1;let t=JSON.parse(r);return console.log("Current user role:",t.role||"no role"),t.role==="admin"}getUserIdFromToken(){let r=localStorage.getItem("token");if(r)try{return JSON.parse(window.atob(r.split(".")[1])).id}catch(t){return console.error("Error decoding token",t),null}return null}handleError(r){let t="Something went wrong; please try again later.";return r.error instanceof ErrorEvent?console.error("Client-side error:",r.error.message):(console.error(`Server-side error: ${r.status}
${r.message}`),t=r.error?.message||r.message),s(t)}static{this.\u0275fac=function(t){return new(t||e)(i(l))}}static{this.\u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{c as a};
